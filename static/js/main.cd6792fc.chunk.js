(this.webpackJsonpmini=this.webpackJsonpmini||[]).push([[0],{75:function(e,t,n){},76:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(12),s=n.n(i),r=(n(75),n(135)),o=n(23),l=n(9),j=(n(76),n(11)),u=n(137),b=n(122),h=n(90),d=n(123),O=n(134),x=n(136),p=n(124),f=n(89),g=n(125),m=n(126),y=n(127),v=n(128),w=n(129),S=n(130),k=n(117),C=n(119),I=n(121),L=n(16),R=n.n(L),A=n(3),P=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var T=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){R.a.get("token")&&c(!0)}),[]);var i=P();return Object(A.jsx)(C.a,{position:"static",children:Object(A.jsxs)(I.a,{children:[Object(A.jsx)(h.a,{variant:"h6",className:i.title,children:"SML URL Shortener"}),n&&Object(A.jsx)(x.a,{color:"inherit",onClick:function(e){e.preventDefault(),R.a.remove("token"),c(!1),window.location.href="/#/login"},children:"Logout"})]})})},U={APIURL:"https://mini-short.herokuapp.com/user"},E=n(131),D=n(132);var W=function(){var e,t=Object(a.useState)(!0),n=Object(j.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)({}),o=Object(j.a)(s,2),k=o[0],C=o[1],I=Object(a.useState)(!1),L=Object(j.a)(I,2),P=L[0],W=L[1],J=Object(a.useState)(!0),M=Object(j.a)(J,2),_=M[0],N=M[1],G=Object(a.useState)(""),z=Object(j.a)(G,2),B=z[0],F=z[1],Y=Object(a.useState)(""),$=Object(j.a)(Y,2),q=$[0],H=$[1];return Object(a.useEffect)((function(){console.log(R.a.get("token")),R.a.get("token")&&(console.log("dlkasds"),i(!0))}),[]),Object(a.useEffect)((function(){var e={method:"GET",headers:{"Content-Type":"application/json",token:R.a.get("token")}};fetch(U.APIURL+"/me",e).then((function(e){return e.json()})).then((function(e){var t;C(e),"Invalid Token"===(null===e||void 0===e?void 0:e.message)?(R.a.remove("token"),i(!1)):null===k||void 0===k||null===(t=k.urls)||void 0===t||t.sort((function(e,t){return t._id-e._id})),console.log(e),N(!1)}))}),[]),_?Object(A.jsx)(u.a,{style:{opacity:"0.5",visibility:"visible"},children:Object(A.jsx)(b.a,{color:"primary"})}):c?Object(A.jsxs)(r.a,{children:[Object(A.jsx)(T,{}),P?Object(A.jsx)(u.a,{style:{opacity:"0.5",visibility:"visible"},children:Object(A.jsx)(b.a,{color:"primary"})}):Object(A.jsxs)(r.a,{style:{textAlign:"center",marginTop:"40px"},children:[Object(A.jsxs)(h.a,{variant:"h5",children:["Welcome back ",k.email]}),Object(A.jsxs)(d.a,{style:{textAlign:"center",maxWidth:"700px"},children:[Object(A.jsxs)(d.a,{style:{display:"flex",alignItems:"center",margin:"40px 0 40px 0",justifyContent:"center"},children:[Object(A.jsx)(O.a,{onChange:function(e){return H(e.target.value)},value:q,label:"Type an URL to short",style:{width:"100%",marginRight:"10px"}}),Object(A.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(e){if(e.preventDefault(),/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(q)){F(""),W(!0);var t={method:"POST",headers:{"Content-Type":"application/json",token:R.a.get("token")},body:JSON.stringify({fullUrl:q})};fetch(U.APIURL+"/short",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t={method:"GET",headers:{"Content-Type":"application/json",token:R.a.get("token")}};fetch(U.APIURL+"/me",t).then((function(e){return e.json()})).then((function(e){C(e),W(!1),console.log(e)}))}))}else F("Invalid url!")},children:"Add"})]}),Object(A.jsx)(h.a,{variant:"subtitle1",style:{color:"red",marginTop:"20px"},children:B}),0===k.urls.length?Object(A.jsx)(h.a,{variant:"subtitle1",style:{margin:"0 0 50px 0"},children:"You have not shorted any URLs."}):Object(A.jsx)(p.a,{component:f.a,style:{maxWidth:"700px",margin:" 40px auto"},children:Object(A.jsxs)(g.a,{style:{minWidth:"600px"},children:[Object(A.jsx)(m.a,{children:Object(A.jsxs)(y.a,{children:[Object(A.jsx)(v.a,{children:"Full URL"}),Object(A.jsx)(v.a,{children:"Mini URL"})]})}),Object(A.jsx)(w.a,{children:null===(e=k.urls)||void 0===e?void 0:e.map((function(e){return Object(A.jsxs)(y.a,{children:[Object(A.jsx)(v.a,{children:e.full}),Object(A.jsx)(v.a,{style:{alignItems:"center"},children:Object(A.jsxs)(S.a,{id:e._id,onClick:function(t){console.log("asd"),window.open("https://mysml.tech/#/".concat(e.short),"_blank")},children:["mysml.tech/#/",e.short]})}),Object(A.jsx)(v.a,{onClick:function(t){return function(e,t){W(!0),e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",token:R.a.get("token")},body:JSON.stringify({short:t})};window.confirm("Are you sure you want to delete?")?fetch(U.APIURL+"/delete",n).then((function(e){return e.json()})).then((function(e){var n=e.user.urls.findIndex((function(e){return e._id==t._id}));console.log(n),n>-1&&e.user.urls.splice(n,1),C(e.user),console.log(e),W(!1)})):W(!1)}(t,e)},children:Object(A.jsx)(E.a,{})})]})}))})]})})]}),Object(A.jsxs)(h.a,{variant:"subtitle1",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:["Made with ",Object(A.jsx)(D.a,{style:{margin:"0 5px"},color:"primary"}),"by ",Object(A.jsx)(S.a,{href:"http://sahilsaha.me",style:{margin:"0 5px"},children:" Sahil Saha"})," "]})]})]}):Object(A.jsx)(l.a,{to:"/login"})};var J=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(j.a)(i,2),u=s[0],b=s[1],p=Object(a.useState)(!1),g=Object(j.a)(p,2),m=(g[0],g[1]),y=Object(a.useState)(""),v=Object(j.a)(y,2),w=v[0],S=v[1],k=Object(a.useState)(!1),C=Object(j.a)(k,2),I=C[0],L=C[1];function P(e,t){"email"===t?c(e.target.value):"password"===t&&b(e.target.value)}return Object(a.useEffect)((function(){R.a.get("token")&&L(!0)}),[]),I?Object(A.jsx)(l.a,{to:"/"}):Object(A.jsxs)(r.a,{children:[Object(A.jsx)(T,{}),Object(A.jsx)(d.a,{children:Object(A.jsx)(f.a,{elevation:5,style:{maxWidth:"500px",padding:"20px",margin:"100px auto"},children:Object(A.jsxs)(d.a,{style:{display:"flex",textAlign:"center",flexDirection:"column"},children:[Object(A.jsx)(h.a,{variant:"h5",children:"Welcome back!"}),Object(A.jsx)(O.a,{onChange:function(e){return P(e,"email")},value:n,variant:"outlined",label:"Email",style:{margin:"20px 0"}}),Object(A.jsx)(O.a,{onChange:function(e){return P(e,"password")},value:u,variant:"outlined",label:"Password",type:"password"}),Object(A.jsxs)(h.a,{style:{margin:"20px 0"},variant:"subtitle1",children:["Don't have an account? ",Object(A.jsx)(o.b,{to:"/signup",children:"Create one"})]}),Object(A.jsx)(x.a,{variant:"contained",color:"primary",style:{margin:"0 0 20px 0"},onClick:function(e){e.preventDefault(),console.log(U.APIURL,u);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:u})};m(!0),fetch(U.APIURL+"/login",t).then((function(e){return e.json()})).then((function(e){void 0!=e.token?(R.a.set("token",e.token),L(!0)):S("Invalid Credentials!"),m(!1)})).catch((function(e){S(e),console.log(e)}))},children:"Login"}),Object(A.jsx)(h.a,{style:{color:"red"},variant:"subtitle1",children:w})]})})}),Object(A.jsxs)(h.a,{variant:"subtitle1",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:["Made with ",Object(A.jsx)(D.a,{style:{margin:"0 5px"},color:"primary"}),"by ",Object(A.jsx)(o.b,{href:"http://sahilsaha.me",style:{margin:"0 5px"},children:" Sahil Saha"})," "]})]})};var M=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(j.a)(i,2),u=s[0],b=s[1],p=Object(a.useState)(""),g=Object(j.a)(p,2),m=g[0],y=g[1],v=Object(a.useState)(!1),w=Object(j.a)(v,2),S=(w[0],w[1]),k=Object(a.useState)(""),C=Object(j.a)(k,2),I=C[0],L=C[1],P=Object(a.useState)(!1),E=Object(j.a)(P,2),W=E[0],J=E[1];function M(e,t){"email"===t?c(e.target.value):"password1"===t?b(e.target.value):"password2"===t&&y(e.target.value)}return Object(a.useEffect)((function(){R.a.get("token")&&J(!0)}),[]),Object(a.useEffect)((function(){L(u!=m?"Passwords must match!":"")}),[m]),W?Object(A.jsx)(l.a,{to:"/"}):Object(A.jsxs)(r.a,{children:[Object(A.jsx)(T,{}),Object(A.jsx)(d.a,{children:Object(A.jsx)(f.a,{elevation:5,style:{maxWidth:"500px",padding:"20px",margin:"100px auto"},children:Object(A.jsxs)(d.a,{style:{display:"flex",textAlign:"center",flexDirection:"column"},children:[Object(A.jsx)(h.a,{variant:"h5",children:"Create an account"}),Object(A.jsx)(O.a,{onChange:function(e){return M(e,"email")},value:n,variant:"outlined",label:"Email",style:{margin:"10px 0"}}),Object(A.jsx)(O.a,{onChange:function(e){return M(e,"password1")},value:u,variant:"outlined",label:"Password",style:{margin:"10px 0 20px 0"},type:"password"}),Object(A.jsx)(O.a,{onChange:function(e){return M(e,"password2")},value:m,variant:"outlined",label:"Confirm Password",type:"password"}),Object(A.jsxs)(h.a,{style:{margin:"20px 0"},variant:"subtitle1",children:["Already have an account? ",Object(A.jsx)(o.b,{to:"/login",children:"Login here"})]}),Object(A.jsx)(x.a,{variant:"contained",color:"primary",style:{margin:"0 0 20px 0"},onClick:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:u})};S(!0),fetch(U.APIURL+"/signup",t).then((function(e){return e.json()})).then((function(e){void 0!=e.token?(R.a.set("token",e.token),J(!0)):L("Account already registered!"),S(!1)})).catch((function(e){L(e),console.log(e)}))},children:"Register"}),Object(A.jsx)(h.a,{style:{color:"red"},variant:"subtitle1",children:I})]})})}),Object(A.jsxs)(h.a,{variant:"subtitle1",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:["Made with ",Object(A.jsx)(D.a,{style:{margin:"0 5px"},color:"primary"}),"by ",Object(A.jsx)(o.b,{href:"http://sahilsaha.me",style:{margin:"0 5px"},children:" Sahil Saha"})," "]})]})};var _=function(){var e=Object(l.g)().short;console.log(e);var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){fetch(U.APIURL+"/".concat(e),{method:"get"}).then((function(e){return e.json()})).then((function(e){window.location.href=e.url,i(e.url),console.log(e)}))}),[]),Object(a.useEffect)((function(){}),[c]),Object(A.jsxs)("div",{children:["Redirecting to ",c]})},N=n(61),G=n(133),z=Object(N.a)({palette:{primary:{main:"#1f56b5"}}});var B=function(){return Object(A.jsx)(o.a,{children:Object(A.jsx)(G.a,{theme:z,children:Object(A.jsx)(r.a,{children:Object(A.jsxs)(l.d,{children:[Object(A.jsx)(l.b,{exact:!0,path:"/",children:Object(A.jsx)(W,{})}),Object(A.jsx)(l.b,{path:"/login",children:Object(A.jsx)(J,{})}),Object(A.jsx)(l.b,{path:"/signup",children:Object(A.jsx)(M,{})}),Object(A.jsx)(l.b,{path:"/:short",children:Object(A.jsx)(_,{})})]})})})})};s.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(B,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.cd6792fc.chunk.js.map
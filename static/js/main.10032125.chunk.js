(this.webpackJsonpmini=this.webpackJsonpmini||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(12),i=n.n(o),r=(n(71),n(31)),s=n(9),l=(n(72),n(11)),j=n(132),u=n(118),d=n(130),b=n(86),h=n(119),O=n(129),x=n(131),p=n(120),f=n(85),g=n(121),v=n(122),m=n(123),y=n(124),k=n(125),w=n(126),S=n(113),C=n(115),L=n(117),T=n(16),A=n.n(T),I=n(3),P=Object(S.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var R=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){A.a.get("token")&&c(!0)}),[]);var o=P();return Object(I.jsx)(C.a,{position:"static",children:Object(I.jsxs)(L.a,{children:[Object(I.jsx)(b.a,{variant:"h6",className:o.title,children:"SML URL Shortener"}),n?Object(I.jsx)(x.a,{color:"inherit",onClick:function(e){e.preventDefault(),A.a.remove("token"),c(!1),window.location.href="/login"},children:"Logout"}):Object(I.jsx)(x.a,{color:"inherit",children:"Login"})]})})},E={APIURL:"https://mini-short.herokuapp.com/user"},U=n(127),D=n(128);var W=function(){var e,t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)({}),r=Object(l.a)(i,2),S=r[0],C=r[1],L=Object(a.useState)(!1),T=Object(l.a)(L,2),P=T[0],W=T[1],_=Object(a.useState)(!0),J=Object(l.a)(_,2),M=J[0],N=J[1],G=Object(a.useState)(""),z=Object(l.a)(G,2),B=z[0],H=z[1],F=Object(a.useState)(""),$=Object(l.a)(F,2),q=$[0],K=$[1];return Object(a.useEffect)((function(){console.log(A.a.get("token")),A.a.get("token")&&(console.log("dlkasds"),o(!0))}),[]),Object(a.useEffect)((function(){var e={method:"GET",headers:{"Content-Type":"application/json",token:A.a.get("token")}};fetch(E.APIURL+"/me",e).then((function(e){return e.json()})).then((function(e){var t;C(e),"Invalid Token"===(null===e||void 0===e?void 0:e.message)?(A.a.remove("token"),o(!1)):null===S||void 0===S||null===(t=S.urls)||void 0===t||t.sort((function(e,t){return t._id-e._id})),console.log(e),N(!1)}))}),[]),M?Object(I.jsx)(j.a,{style:{opacity:"0.5",visibility:"visible"},children:Object(I.jsx)(u.a,{color:"primary"})}):c?Object(I.jsxs)(d.a,{children:[Object(I.jsx)(R,{}),P?Object(I.jsx)(j.a,{style:{opacity:"0.5",visibility:"visible"},children:Object(I.jsx)(u.a,{color:"primary"})}):Object(I.jsxs)(d.a,{style:{textAlign:"center",marginTop:"40px"},children:[Object(I.jsxs)(b.a,{variant:"h5",children:["Welcome back ",S.email]}),Object(I.jsxs)(h.a,{style:{textAlign:"center",maxWidth:"700px"},children:[Object(I.jsxs)(h.a,{style:{display:"flex",alignItems:"center",marginTop:"20px",justifyContent:"center"},children:[Object(I.jsx)(O.a,{onChange:function(e){return K(e.target.value)},value:q,label:"Type an URL to short",style:{width:"100%",marginRight:"10px"}}),Object(I.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(e){if(e.preventDefault(),/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(q)){H(""),W(!0);var t={method:"POST",headers:{"Content-Type":"application/json",token:A.a.get("token")},body:JSON.stringify({fullUrl:q})};fetch(E.APIURL+"/short",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t={method:"GET",headers:{"Content-Type":"application/json",token:A.a.get("token")}};fetch(E.APIURL+"/me",t).then((function(e){return e.json()})).then((function(e){C(e),W(!1),console.log(e)}))}))}else H("Invalid url!")},children:"Add"})]}),Object(I.jsx)(b.a,{variant:"subtitle1",style:{color:"red",marginTop:"20px"},children:B}),Object(I.jsx)(p.a,{component:f.a,style:{maxWidth:"700px",margin:" 40px auto"},children:Object(I.jsxs)(g.a,{style:{minWidth:"600px"},children:[Object(I.jsx)(v.a,{children:Object(I.jsxs)(m.a,{children:[Object(I.jsx)(y.a,{children:"Full URL"}),Object(I.jsx)(y.a,{children:"Mini URL"})]})}),Object(I.jsx)(k.a,{children:null===(e=S.urls)||void 0===e?void 0:e.map((function(e){return Object(I.jsxs)(m.a,{children:[Object(I.jsx)(y.a,{children:e.full}),Object(I.jsxs)(y.a,{style:{alignItems:"center"},children:[Object(I.jsxs)(w.a,{id:e._id,onClick:function(t){console.log("asd"),window.open("http://mysml.tech/#/".concat(e.short),"_blank")},children:["http://mysml.tech/#/",e.short]}),Object(I.jsx)(U.a,{onClick:function(t){return function(e,t){console.log(t);var n=document.getElementById(t);console.log(n),navigator.clipboard.writeText(n.innerHTML),alert("Copied "+n.innerHTML)}(0,e._id)},style:{marginLeft:"10px"}})]}),Object(I.jsx)(y.a,{onClick:function(t){return function(e,t){W(!0),e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",token:A.a.get("token")},body:JSON.stringify({short:t})};window.confirm("Are you sure you want to delete?")?fetch(E.APIURL+"/delete",n).then((function(e){return e.json()})).then((function(e){var n=e.user.urls.findIndex((function(e){return e._id==t._id}));console.log(n),n>-1&&e.user.urls.splice(n,1),C(e.user),console.log(e),W(!1)})):W(!1)}(t,e)},children:Object(I.jsx)(D.a,{})})]})}))})]})})]})]})]}):Object(I.jsx)(s.a,{to:"/login"})};var _=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),j=i[0],u=i[1],p=Object(a.useState)(!1),g=Object(l.a)(p,2),v=(g[0],g[1]),m=Object(a.useState)(""),y=Object(l.a)(m,2),k=y[0],w=y[1],S=Object(a.useState)(!1),C=Object(l.a)(S,2),L=C[0],T=C[1];function P(e,t){"email"===t?c(e.target.value):"password"===t&&u(e.target.value)}return Object(a.useEffect)((function(){A.a.get("token")&&T(!0)}),[]),L?Object(I.jsx)(s.a,{to:"/"}):Object(I.jsxs)(d.a,{children:[Object(I.jsx)(R,{}),Object(I.jsx)(h.a,{children:Object(I.jsx)(f.a,{elevation:5,style:{maxWidth:"500px",padding:"20px",margin:"100px auto"},children:Object(I.jsxs)(h.a,{style:{display:"flex",textAlign:"center",flexDirection:"column"},children:[Object(I.jsx)(b.a,{variant:"h5",children:"Welcome back!"}),Object(I.jsx)(O.a,{onChange:function(e){return P(e,"email")},value:n,variant:"outlined",label:"Email",style:{margin:"20px 0"}}),Object(I.jsx)(O.a,{onChange:function(e){return P(e,"password")},value:j,variant:"outlined",label:"Password",type:"password"}),Object(I.jsxs)(b.a,{style:{margin:"20px 0"},variant:"subtitle1",children:["Don't have an account? ",Object(I.jsx)(r.b,{to:"/signup",children:"Create one"})]}),Object(I.jsx)(x.a,{variant:"contained",color:"primary",style:{margin:"0 0 20px 0"},onClick:function(e){e.preventDefault(),console.log(E.APIURL,j);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:j})};v(!0),fetch(E.APIURL+"/login",t).then((function(e){return e.json()})).then((function(e){void 0!=e.token?(A.a.set("token",e.token),T(!0)):w("Invalid Credentials!"),v(!1)})).catch((function(e){w(e),console.log(e)}))},children:"Login"}),Object(I.jsx)(b.a,{style:{color:"red"},variant:"subtitle1",children:k})]})})})]})};var J=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),j=i[0],u=i[1],p=Object(a.useState)(""),g=Object(l.a)(p,2),v=g[0],m=g[1],y=Object(a.useState)(!1),k=Object(l.a)(y,2),w=(k[0],k[1]),S=Object(a.useState)(""),C=Object(l.a)(S,2),L=C[0],T=C[1],P=Object(a.useState)(!1),U=Object(l.a)(P,2),D=U[0],W=U[1];function _(e,t){"email"===t?c(e.target.value):"password1"===t?u(e.target.value):"password2"===t&&m(e.target.value)}return Object(a.useEffect)((function(){A.a.get("token")&&W(!0)}),[]),Object(a.useEffect)((function(){T(j!=v?"Passwords must match!":"")}),[v]),D?Object(I.jsx)(s.a,{to:"/"}):Object(I.jsxs)(d.a,{children:[Object(I.jsx)(R,{}),Object(I.jsx)(h.a,{children:Object(I.jsx)(f.a,{elevation:5,style:{maxWidth:"500px",padding:"20px",margin:"100px auto"},children:Object(I.jsxs)(h.a,{style:{display:"flex",textAlign:"center",flexDirection:"column"},children:[Object(I.jsx)(b.a,{variant:"h5",children:"Create an account"}),Object(I.jsx)(O.a,{onChange:function(e){return _(e,"email")},value:n,variant:"outlined",label:"Email",style:{margin:"10px 0"}}),Object(I.jsx)(O.a,{onChange:function(e){return _(e,"password1")},value:j,variant:"outlined",label:"Password",style:{margin:"10px 0 20px 0"},type:"password"}),Object(I.jsx)(O.a,{onChange:function(e){return _(e,"password2")},value:v,variant:"outlined",label:"Confirm Password",type:"password"}),Object(I.jsxs)(b.a,{style:{margin:"20px 0"},variant:"subtitle1",children:["Already have an account? ",Object(I.jsx)(r.b,{to:"/login",children:"Login here"})]}),Object(I.jsx)(x.a,{variant:"contained",color:"primary",style:{margin:"0 0 20px 0"},onClick:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:j})};w(!0),fetch(E.APIURL+"/signup",t).then((function(e){return e.json()})).then((function(e){void 0!=e.token?(A.a.set("token",e.token),W(!0)):T("Account already registered!"),w(!1)})).catch((function(e){T(e),console.log(e)}))},children:"Register"}),Object(I.jsx)(b.a,{style:{color:"red"},variant:"subtitle1",children:L})]})})})]})};var M=function(){var e=Object(s.g)().short;console.log(e);var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){fetch(E.APIURL+"/".concat(e),{method:"get"}).then((function(e){return e.json()})).then((function(e){window.location.href=e.url,o(e.url),console.log(e)}))}),[]),Object(a.useEffect)((function(){}),[c]),Object(I.jsxs)("div",{children:["Redirecting to ",c]})};var N=function(){return Object(I.jsx)(r.a,{children:Object(I.jsxs)(s.d,{children:[Object(I.jsx)(s.b,{exact:!0,path:"/",children:Object(I.jsx)(W,{})}),Object(I.jsx)(s.b,{path:"/login",children:Object(I.jsx)(_,{})}),Object(I.jsx)(s.b,{path:"/signup",children:Object(I.jsx)(J,{})}),Object(I.jsx)(s.b,{path:"/:short",children:Object(I.jsx)(M,{})})]})})};i.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(N,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.10032125.chunk.js.map